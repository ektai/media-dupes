<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>app/js/modules/youtubeDl.js - media-dupes jsdoc documentation</title>
    
    <meta name="description" content="a simple JSDoc based documentation for media-dupes" />
    
        <meta name="keywords" content="media-dupes" />
        <meta name="keyword" content="media-dupes" />
    
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav class="wrap">
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/yafp/media-dupes" target="_blank" class="menu-item" id="website_link" >Github</a></h2><h3>Modules</h3><ul><li><a href="module-crashReporter.html">crashReporter</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-crashReporter.html#~initCrashReporter">initCrashReporter</a></li></ul></li><li><a href="module-ffmpeg.html">ffmpeg</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-ffmpeg.html#~ffmpegGetBinaryPath">ffmpegGetBinaryPath</a></li></ul></li><li><a href="module-githubUrls.html">githubUrls</a></li><li><a href="module-sentry.html">sentry</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-sentry.html#~countEvent">countEvent</a></li><li data-type='method' style='display: none;'><a href="module-sentry.html#~disableSentry">disableSentry</a></li><li data-type='method' style='display: none;'><a href="module-sentry.html#~enableSentry">enableSentry</a></li></ul></li><li><a href="module-settings.html">settings</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-settings.html#~settingsAudioFormatSave">settingsAudioFormatSave</a></li><li data-type='method' style='display: none;'><a href="module-settings.html#~settingsOpenDevTools">settingsOpenDevTools</a></li><li data-type='method' style='display: none;'><a href="module-settings.html#~settingsOpenExternal">settingsOpenExternal</a></li><li data-type='method' style='display: none;'><a href="module-settings.html#~settingsSaveAdditionalParameter">settingsSaveAdditionalParameter</a></li><li data-type='method' style='display: none;'><a href="module-settings.html#~settingsSelectDownloadDir">settingsSelectDownloadDir</a></li><li data-type='method' style='display: none;'><a href="module-settings.html#~settingsToggleAdditionalParameter">settingsToggleAdditionalParameter</a></li><li data-type='method' style='display: none;'><a href="module-settings.html#~settingsToggleErrorReporting">settingsToggleErrorReporting</a></li><li data-type='method' style='display: none;'><a href="module-settings.html#~settingsTogglePrereleases">settingsTogglePrereleases</a></li><li data-type='method' style='display: none;'><a href="module-settings.html#~settingsToggleUrlInformations">settingsToggleUrlInformations</a></li><li data-type='method' style='display: none;'><a href="module-settings.html#~settingsToggleVerboseMode">settingsToggleVerboseMode</a></li></ul></li><li><a href="module-ui.html">ui</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-ui.html#~inputUrlFieldSetState">inputUrlFieldSetState</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainAddUrl">windowMainAddUrl</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainApplicationStateSet">windowMainApplicationStateSet</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainBlurSet">windowMainBlurSet</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainButtonsOthersDisable">windowMainButtonsOthersDisable</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainButtonsOthersEnable">windowMainButtonsOthersEnable</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainButtonsStartDisable">windowMainButtonsStartDisable</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainButtonsStartEnable">windowMainButtonsStartEnable</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainDisableAddUrlButton">windowMainDisableAddUrlButton</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainDistract">windowMainDistract</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainDownloadContent">windowMainDownloadContent</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainDownloadQueueFinished">windowMainDownloadQueueFinished</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainDownloadVideo">windowMainDownloadVideo</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainEnableAddUrlButton">windowMainEnableAddUrlButton</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainIntroShow">windowMainIntroShow</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainLoadingAnimationHide">windowMainLoadingAnimationHide</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainLoadingAnimationShow">windowMainLoadingAnimationShow</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainLogAppend">windowMainLogAppend</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainLogReset">windowMainLogReset</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainLogScrollToEnd">windowMainLogScrollToEnd</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainOpenDownloadFolder">windowMainOpenDownloadFolder</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainResetAskUser">windowMainResetAskUser</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainSettingsUiLoad">windowMainSettingsUiLoad</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainShowSupportedExtractors">windowMainShowSupportedExtractors</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainThumbnailPreviewReset">windowMainThumbnailPreviewReset</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainToDoListReset">windowMainToDoListReset</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainToDoListRestore">windowMainToDoListRestore</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainToDoListSave">windowMainToDoListSave</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainToDoListUpdate">windowMainToDoListUpdate</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainUiMakeUrgent">windowMainUiMakeUrgent</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainUiReset">windowMainUiReset</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~youtubeSuggest">youtubeSuggest</a></li></ul></li><li><a href="module-unhandled.html">unhandled</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-unhandled.html#~initUnhandled">initUnhandled</a></li></ul></li><li><a href="module-utils.html">utils</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils.html#~canWriteFileOrFolder">canWriteFileOrFolder</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~defaultDownloadFolderGet">defaultDownloadFolderGet</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~disclaimerCheck">disclaimerCheck</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~disclaimerShow">disclaimerShow</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~downloadStatusCheck">downloadStatusCheck</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~formatBytes">formatBytes</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~fullyDecodeURI">fullyDecodeURI</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~generateTimestamp">generateTimestamp</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~globalObjectGet">globalObjectGet</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~globalObjectSet">globalObjectSet</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~isDirectoryAvailable">isDirectoryAvailable</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~isDirectoryWriteable">isDirectoryWriteable</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~isEncoded">isEncoded</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~openURL">openURL</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~pathExists">pathExists</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~showNotification">showNotification</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~showNoty">showNoty</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~urlIsReachable">urlIsReachable</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~userSettingRead">userSettingRead</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~userSettingWrite">userSettingWrite</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~validURL">validURL</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~writeConsoleMsg">writeConsoleMsg</a></li></ul></li><li><a href="module-youtubeDl.html">youtubeDl</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-youtubeDl.html#~binaryDetailsPathGet">binaryDetailsPathGet</a></li><li data-type='method' style='display: none;'><a href="module-youtubeDl.html#~binaryDetailsValueGet">binaryDetailsValueGet</a></li><li data-type='method' style='display: none;'><a href="module-youtubeDl.html#~binaryPathGet">binaryPathGet</a></li><li data-type='method' style='display: none;'><a href="module-youtubeDl.html#~binaryPathReset">binaryPathReset</a></li><li data-type='method' style='display: none;'><a href="module-youtubeDl.html#~binaryUpdateCheck">binaryUpdateCheck</a></li><li data-type='method' style='display: none;'><a href="module-youtubeDl.html#~binaryUpdateExecute">binaryUpdateExecute</a></li><li data-type='method' style='display: none;'><a href="module-youtubeDl.html#~binaryUpdateSearch">binaryUpdateSearch</a></li><li data-type='method' style='display: none;'><a href="module-youtubeDl.html#~getUrlInfo">getUrlInfo</a></li></ul></li></ul><h3>Events</h3><ul><li><a href="renderer.html#.event:keyCode-Thekeypressevent">keyCode - The key press event</a></li></ul><h3>Namespaces</h3><ul><li><a href="main.html">main</a><ul class='methods'><li data-type='method' style='display: none;'><a href="main.html#.createMenuMain">createMenuMain</a></li><li data-type='method' style='display: none;'><a href="main.html#.createWindowDistraction">createWindowDistraction</a></li><li data-type='method' style='display: none;'><a href="main.html#.createWindowMain">createWindowMain</a></li><li data-type='method' style='display: none;'><a href="main.html#.createWindowSettings">createWindowSettings</a></li><li data-type='method' style='display: none;'><a href="main.html#.doLog">doLog</a></li><li data-type='method' style='display: none;'><a href="main.html#.forceSingleAppInstance">forceSingleAppInstance</a></li><li data-type='method' style='display: none;'><a href="main.html#.powerMonitorInit">powerMonitorInit</a></li><li data-type='method' style='display: none;'><a href="main.html#.powerMonitorNotify">powerMonitorNotify</a></li></ul></li><li><a href="renderer.html">renderer</a><ul class='members'><li data-type='member' style='display: none;'><a href="renderer.html#.blurMainUI">blurMainUI</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.countAppStarts">countAppStarts</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.initSettings">initSettings</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.openSettings">openSettings</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.openYoutubeSuggestDialog">openYoutubeSuggestDialog</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.powerMonitorNotification">powerMonitorNotification</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.scheduleUpdateCheckMediaDupes">scheduleUpdateCheckMediaDupes</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.scheduleUpdateCheckYoutubeDl">scheduleUpdateCheckYoutubeDl</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.startCheckingDependencies">startCheckingDependencies</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.startDisclaimerCheck">startDisclaimerCheck</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.startSearchUpdatesSilent">startSearchUpdatesSilent</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.startSearchUpdatesVerbose">startSearchUpdatesVerbose</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.todoListCheck">todoListCheck</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.todoListTryToSave">todoListTryToSave</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.unblurMainUI">unblurMainUI</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.youtubeDlBinaryPathReset">youtubeDlBinaryPathReset</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.youtubeDlBinaryUpdate">youtubeDlBinaryUpdate</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.youtubeDlSearchUpdatesSilent">youtubeDlSearchUpdatesSilent</a></li></ul><ul class='methods'><li data-type='method' style='display: none;'><a href="renderer.html#.checkApplicationDependencies">checkApplicationDependencies</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.openReleasesOverview">openReleasesOverview</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.searchUpdate">searchUpdate</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.settingsFolderOpen">settingsFolderOpen</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.settingsGetYoutubeDLBinaryVersion">settingsGetYoutubeDLBinaryVersion</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.settingsLoadAllOnAppStart">settingsLoadAllOnAppStart</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.settingsLoadAllOnSettingsUiLoad">settingsLoadAllOnSettingsUiLoad</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.settingsShowFfmpegInfo">settingsShowFfmpegInfo</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.settingsShowYoutubeDLInfo">settingsShowYoutubeDLInfo</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.titlebarInit">titlebarInit</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.urlInputFieldOnFocus">urlInputFieldOnFocus</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.urlInputFieldOnKeyUp">urlInputFieldOnKeyUp</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.validateUrlBeforeAdd">validateUrlBeforeAdd</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowMainClickButtonAddUrl">windowMainClickButtonAddUrl</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowMainClickButtonAudio">windowMainClickButtonAudio</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowMainClickButtonDownloads">windowMainClickButtonDownloads</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowMainClickButtonExtrators">windowMainClickButtonExtrators</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowMainClickButtonIntro">windowMainClickButtonIntro</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowMainClickButtonLogReset">windowMainClickButtonLogReset</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowMainClickButtonSettings">windowMainClickButtonSettings</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowMainClickButtonUIReset">windowMainClickButtonUIReset</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowMainClickButtonVideo">windowMainClickButtonVideo</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowMainClickButtonVideo">windowMainClickButtonVideo</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowMainClickDistract">windowMainClickDistract</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowSettingsClickButtonAdditionalParameterSave">windowSettingsClickButtonAdditionalParameterSave</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowSettingsClickButtonChooseDownloadDir">windowSettingsClickButtonChooseDownloadDir</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowSettingsClickCheckboxAdditionalParameter">windowSettingsClickCheckboxAdditionalParameter</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowSettingsClickCheckboxErrorReporting">windowSettingsClickCheckboxErrorReporting</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowSettingsClickCheckboxErrorReportingMoreInfo">windowSettingsClickCheckboxErrorReportingMoreInfo</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowSettingsClickCheckboxUpdatePolicy">windowSettingsClickCheckboxUpdatePolicy</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowSettingsClickCheckboxVerboseMode">windowSettingsClickCheckboxVerboseMode</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowSettingsClickDropdownAudioFormats">windowSettingsClickDropdownAudioFormats</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowSettingsClickIconBug">windowSettingsClickIconBug</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowSettingsClickIconUserSettingsDir">windowSettingsClickIconUserSettingsDir</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowSettingsClickOpenUrl">windowSettingsClickOpenUrl</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowSettingsClickYoutubeDlUpdate">windowSettingsClickYoutubeDlUpdate</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">app/js/modules/youtubeDl.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @file Contains all youtubeDl functions
 * @author yafp
 * @module youtubeDl
 */
'use strict'

// ----------------------------------------------------------------------------
// REQUIRE MODULES
// ----------------------------------------------------------------------------
//
const ui = require('./ui.js')
const utils = require('./utils.js')

// ----------------------------------------------------------------------------
// VARIABLES
// ----------------------------------------------------------------------------
//
var youtubeDlBinaryDetailsVersion
var youtubeDlBinaryDetailsPath
var youtubeDLBinaryDetailsExec

// ----------------------------------------------------------------------------
// YOUTUBE-DL: Arguments which should be filtered out if the user sets them.
// Idea from: https://github.com/mayeaux/videodownloader/blob/master/util.js
// ----------------------------------------------------------------------------
/**
* @constant
* @type {array}
* @default
*/
const blacklistedParameter = [
    '-h',
    '--help',
    '-v',
    '--version',
    '-U',
    '--update',
    '-q',
    '--quiet',
    '-s',
    '--simulate',
    '-g',
    '--get-url',
    '-e',
    '--get-title',
    '--get-id',
    '--get-thumbnail',
    '--get-description',
    '--get-duration',
    '--get-filename',
    '--get-format',
    '-j',
    '--dump-json',
    '--newline',
    '--no-progress',
    '--console-title',
    '--dump-intermediate-pages',
    '--write-pages'
]

// ----------------------------------------------------------------------------
// YOUTUBE-DL: Binary Details
// ----------------------------------------------------------------------------

/**
* @function binaryDetailsPathGet
* @summary Gets the path to the youtube-dl binary details file
* @description Gets the path to the youtube-dl binary details file
* @return {string} youtubeDlBinaryDetailsPath - The actual path to the youtube-dl details file
*/
function binaryDetailsPathGet () {
    const path = require('path')
    const remote = require('electron').remote
    const app = remote.app

    var youtubeDlBinaryDetailsPath = path.join(app.getAppPath(), 'node_modules', 'youtube-dl', 'bin', 'details')
    return (youtubeDlBinaryDetailsPath)
}

/**
* @function binaryDetailsValueGet
* @summary Gets all values from the youtube-dl binary details file
* @description Gets all values from the youtube-dl binary details file
*/
function binaryDetailsValueGet (_callback) {
    const fs = require('fs')
    youtubeDlBinaryDetailsPath = binaryDetailsPathGet() // get the path to the details file

    fs.readFile(youtubeDlBinaryDetailsPath, 'utf8', function (error, contents) {
        if (error) {
            utils.writeConsoleMsg('error', 'binaryDetailsValueGet ::: Unable to read youtube-dl binary details values. Error: ' + error + '.')
            throw error
        } else {
            const data = JSON.parse(contents)

            youtubeDlBinaryDetailsVersion = data.version
            youtubeDlBinaryDetailsPath = data.path
            youtubeDLBinaryDetailsExec = data.exec

            utils.writeConsoleMsg('info', 'binaryDetailsValueGet ::: Version: ' + youtubeDlBinaryDetailsVersion + '.')
            utils.writeConsoleMsg('info', 'binaryDetailsValueGet ::: Path: ' + youtubeDlBinaryDetailsPath + '.')
            utils.writeConsoleMsg('info', 'binaryDetailsValueGet ::: Exec: ' + youtubeDLBinaryDetailsExec + '.')

            // console.info(data[value])
            // var currentDetailsValue = data[value]

            // utils.writeConsoleMsg('warn', 'binaryDetailsValueGet ::: youtube-dl binary details value is version: _' + currentDetailsValue + '_.')
            _callback()
        }
    })
}

// ----------------------------------------------------------------------------
// YOUTUBE-DL: Binary Path
// ----------------------------------------------------------------------------

/**
* @function binaryPathGet
* @summary Gets the path to the youtube-dl binary file
* @description Gets the path to the youtube-dl binary file using getYtdlBinary()
* @return {string} youtubeDlBinaryPath - The actual path to the youtube-dl binary
*/
function binaryPathGet () {
    const youtubedl = require('youtube-dl')
    var youtubeDlBinaryPath
    youtubeDlBinaryPath = youtubedl.getYtdlBinary() // get the path of the binary
    // utils.writeConsoleMsg('info', 'binaryPathGet ::: youtube-dl binary path is: _' + youtubeDlBinaryPath + '_.')
    return (youtubeDlBinaryPath)
}

/**
* @function binaryPathReset
* @summary Resets the youtube-dl binary path in details
* @description Resets the youtube-dl binary path in details
* @param {string} path - The path to the youtube-dl details file
*/
function binaryPathReset (path) {
    const fs = require('fs')

    fs.readFile(path, 'utf8', function (error, contents) {
        if (error) {
            utils.writeConsoleMsg('error', 'binaryPathReset ::: Error while trying to read the youtube-dl path. Error: ' + error)
            utils.showNoty('error', 'Unable to read the youtube-dl binary details file. Error: ' + error)
            throw error
        } else {
            const data = JSON.parse(contents)
            var youtubeDlBinaryPath = data.path
            utils.writeConsoleMsg('info', 'binaryPathReset ::: youtube-dl binary path was: _' + youtubeDlBinaryPath + '_ before reset.')

            // now update it
            if (youtubeDlBinaryPath !== null) {
                // update it back to default
                data.path = null
                fs.writeFileSync(path, JSON.stringify(data))
                utils.writeConsoleMsg('info', 'binaryPathReset ::: Did reset the youtube-dl binary path back to default.')
                utils.showNoty('success', 'Did reset the youtube-dl binary path back to default')
            } else {
                // nothing to do
                utils.writeConsoleMsg('info', 'binaryPathReset ::: youtube-dl binary path is: _' + youtubeDlBinaryPath + '_. This is the default')
                utils.showNoty('info', 'The youtube-dl binary path was already on its default value. Did no changes.')
            }
        }
    })
}

// ----------------------------------------------------------------------------
// YOUTUBE-DL: Binary Update
// ----------------------------------------------------------------------------

/**
* @function binaryUpdateCheck
* @summary Checks if the yoututbe-dl setup allows updating or not
* @description Checks if the yoututbe-dl setup allows updating or not
* @param {boolean} [silent] - Boolean with default value. Shows a feedback in case of no available updates If 'silent' = false. Special handling for manually triggered update search
* @param {boolean} [force] - If progressing is forced or not
*/
function binaryUpdateCheck (silent = true, force = false) {
    ui.windowMainLoadingAnimationShow()
    ui.windowMainApplicationStateSet('Searching updates for youtube-dl binary')

    // check if we could update in general = is details file writeable?
    // if not - we can cancel right away
    var youtubeDlBinaryDetailsPath = binaryDetailsPathGet()
    utils.canWriteFileOrFolder(youtubeDlBinaryDetailsPath, function (error, isWritable) {
        if (error) {
            utils.writeConsoleMsg('error', 'binaryUpdateCheck ::: Error while trying to read the youtube-dl details file. Error: ' + error)
            throw error
        }

        if (isWritable === true) {
            // technically we could execute an update if there is one - so lets search for updates
            utils.writeConsoleMsg('info', 'binaryUpdateCheck ::: Updating youtube-dl binary is technically possible - so start searching for available youtube-dl updates. Silent: _' + silent + '_ and Force: _' + force + '_.')
            var isYoutubeBinaryUpdateAvailable = binaryUpdateSearch(silent, force)
        } else {
            // details file cant be resetted due to permission issues
            utils.writeConsoleMsg('warn', 'binaryUpdateCheck ::: Updating youtube-dl binary is not possible on this setup due to permission issues.')

            if (silent === false) {
                utils.showNoty('error', 'Unable to update youtube-dl as ' + youtubeDlBinaryDetailsPath + ' is not writeable. This depends most likely on the package/installation type you selected')
                ui.windowMainLoadingAnimationHide()
                ui.windowMainApplicationStateSet()
            }
        }
    })
}

/**
* @function binaryUpdateSearch
* @summary Searches for youtube-dl binary updates
* @description Searches for youtube-dl binary updates
* @param {boolean} silent - Defaults to true. If true, the progress is silent, if false there is info-feedback even if there is no update available
*/
function binaryUpdateSearch (silent = true, force = false) {
    var remoteAppVersionLatest = '0.0.0'
    var localAppVersion = '0.0.0'
    var versions

    const urlYTDLGitHubRepoTags = 'https://api.github.com/repos/ytdl-org/youtube-dl/tags' // set youtube-dl API url
    utils.writeConsoleMsg('info', 'binaryUpdateSearch ::: Start checking _' + urlYTDLGitHubRepoTags + '_ for available youtube-dl releases. Parameters are silent: _' + silent + '_ and force: _' + force + '_.')

    var updateStatus = $.get(urlYTDLGitHubRepoTags, function (data, status) {
        // 3000 // in milliseconds

        utils.writeConsoleMsg('info', 'binaryUpdateSearch ::: Accessing _' + urlYTDLGitHubRepoTags + '_ ended with: _' + status + '_')

        // success
        versions = data.sort(function (v1, v2) {
            // return semver.compare(v2.name, v1.name);
        })

        // get remote version
        //
        remoteAppVersionLatest = versions[0].name
        utils.writeConsoleMsg('info', 'binaryUpdateSearch ::: Latest Remote version is: ' + remoteAppVersionLatest)
        // remoteAppVersionLatest = '66.6.6'; // overwrite variable to simulate available updates

        // get local version
        binaryDetailsValueGet(function () {
            utils.writeConsoleMsg('info', 'binaryUpdateSearch ::: Fetched all values from details file')
            localAppVersion = youtubeDlBinaryDetailsVersion

            utils.writeConsoleMsg('info', 'binaryUpdateSearch ::: Local youtube-dl binary version: ' + localAppVersion)
            utils.writeConsoleMsg('info', 'binaryUpdateSearch ::: Latest youtube-dl binary version: ' + remoteAppVersionLatest)

            if (force === true) {
                binaryUpdateExecute() // we are updating - ignoring what is currently installed
            } else {
                if (localAppVersion &lt; remoteAppVersionLatest) {
                    utils.writeConsoleMsg('info', 'binaryUpdateSearch ::: Found update for youtube-dl binary. Ask the user if he wants to execute the update now')

                    // ask user if he wants to open all those urls
                    const Noty = require('noty')
                    var n = new Noty(
                        {
                            theme: 'bootstrap-v4',
                            layout: 'bottom',
                            type: 'info',
                            closeWith: [''], // to prevent closing the confirm-dialog by clicking something other then a confirm-dialog-button
                            text: 'Do you want to update youtube-dl now from &lt;b>' + localAppVersion + '&lt;/b> to &lt;b>' + remoteAppVersionLatest + '&lt;/b>?',
                            buttons: [
                                Noty.button('Yes', 'btn btn-success mediaDupes_btnDefaultWidth', function () {
                                    n.close()
                                    binaryUpdateExecute()
                                },
                                {
                                    id: 'button1', 'data-status': 'ok'
                                }),
                                Noty.button('No', 'btn btn-secondary mediaDupes_btnDefaultWidth float-right', function () {
                                    n.close()
                                })
                            ]
                        })

                    n.show() // show the noty dialog
                } else {
                    if (silent === false) {
                        utils.showNoty('info', '&lt;b>No youtube-dl binary update available&lt;/b>&lt;br>You are already using the latest binary version of youtube-dl')
                    }
                }
            }
        })

        utils.writeConsoleMsg('info', 'binaryUpdateSearch ::: Successfully checked ' + urlYTDLGitHubRepoTags + ' for available releases')
    })
        .done(function () {
        // utils.writeConsoleMsg('info', 'binaryUpdateSearch ::: Successfully checked ' + urlGitHubRepoTags + ' for available releases');
        })

        .fail(function () {
            utils.writeConsoleMsg('info', 'binaryUpdateSearch ::: Checking ' + urlYTDLGitHubRepoTags + ' for available releases failed.')
            utils.showNoty('error', 'Checking &lt;b>' + urlYTDLGitHubRepoTags + '&lt;/b> for available releases failed. Please troubleshoot your network connection.', 0)
        })

        .always(function () {
            utils.writeConsoleMsg('info', 'binaryUpdateSearch ::: Finished checking ' + urlYTDLGitHubRepoTags + ' for available releases')
            ui.windowMainLoadingAnimationHide()
            ui.windowMainButtonsOthersEnable()
            ui.windowMainApplicationStateSet()
        })
}

/**
* @function binaryUpdateExecute
* @summary Updates the youtube-dl binary
* @description Updates the youtube-dl binary
*/
function binaryUpdateExecute () {
    const youtubedl = require('youtube-dl')
    const downloader = require('youtube-dl/lib/downloader')

    const remote = require('electron').remote
    const app = remote.app
    const path = require('path')
    const targetPath = path.join(app.getPath('userData'), 'youtube-dl') // set targetPath

    // start downloading latest youtube-dl binary to custom path
    downloader(targetPath, function error (error, done) {
        'use strict'
        if (error) {
            utils.writeConsoleMsg('error', 'binaryUpdateExecute ::: Error while trying to update the youtube-dl binary at: _' + targetPath + '_. Error: ' + error)
            utils.showNoty('error', 'Unable to update youtube-dl binary. Error: ' + error, 0)
            throw error
        }
        utils.writeConsoleMsg('info', 'binaryUpdateExecute ::: Updated youtube-dl binary at: _' + targetPath + '_.')
        console.log(done)
        utils.showNoty('success', done)
    })
}

/**
* @function getUrlInfo
* @summary Outputs infos to a single url
* @description Outputs infos to a single url
* @param {string} url - the url to fetich infos about
*/
function getUrlInfo (url) {
    ui.windowMainLoadingAnimationShow()

    const youtubedl = require('youtube-dl')

    // Optional arguments passed to youtube-dl.
    // const options = ['--username=user', '--password=hunter2']
    const options = []

    youtubedl.getInfo(url, options, function (err, info) {
        if (err) {
            ui.windowMainLoadingAnimationHide()
            throw err
        }

        /*
        console.log('id:', info.id)
        console.log('title:', info.title)
        console.log('url:', info.url)
        console.log('thumbnail:', info.thumbnail)
        console.log('description:', info.description)
        console.log('filename:', info._filename)
        console.log('format id:', info.format_id)
        */

        ui.windowMainLogAppend('Checking URL for meta informations:', true)

        var gotUrlInfos = false

        // info.id
        if (typeof info.id !== 'undefined') {
            ui.windowMainLogAppend(' id:\t' + info.id)
            gotUrlInfos = true
        }

        // info.title
        if (typeof info.title !== 'undefined') {
            ui.windowMainLogAppend(' title:\t' + info.title)
            gotUrlInfos = true
        }

        // info.url
        if (typeof info.url !== 'undefined') {
            ui.windowMainLogAppend(' url:\t' + info.url)
            gotUrlInfos = true
        }

        // info.thumbnail
        var thumbnailUrl
        if (typeof info.thumbnail !== 'undefined') {
            thumbnailUrl = info.thumbnail
            ui.windowMainLogAppend(' thumb:\t' + thumbnailUrl)
            gotUrlInfos = true
        } else {
            thumbnailUrl = ''
        }

        // in mainWindow
        $('#mainWindowThumbnailPreview').attr('src', thumbnailUrl)

        // in modal:
        $('#previewTitle').html(info.title) // header
        $('#previewThumbnailImage').attr('src', thumbnailUrl) // body
        $('#previewId').html(info.id) // footer:
        $('#previewDesc').html(info.description) // footer:

        // info.description
        if (typeof info.description !== 'undefined') {
            ui.windowMainLogAppend(' desc:\t' + info.description)
            gotUrlInfos = true
        }

        // info._filename
        if (typeof info._filename !== 'undefined') {
            ui.windowMainLogAppend(' name:\t' + info._filename)
            gotUrlInfos = true
        }

        if (gotUrlInfos === false) {
            ui.windowMainLogAppend('No meta informations found for: ' + url, true)
        }

        ui.windowMainLoadingAnimationHide()
    })
}

// ----------------------------------------------------------------------------
// EXPORT THE MODULE FUNCTIONS
// ----------------------------------------------------------------------------
//
module.exports.blacklistedParameter = blacklistedParameter
module.exports.binaryDetailsPathGet = binaryDetailsPathGet
module.exports.binaryDetailsValueGet = binaryDetailsValueGet
module.exports.binaryPathGet = binaryPathGet
module.exports.binaryPathReset = binaryPathReset
module.exports.binaryUpdateCheck = binaryUpdateCheck
module.exports.binaryUpdateSearch = binaryUpdateSearch
module.exports.binaryUpdateExecute = binaryUpdateExecute
module.exports.getUrlInfo = getUrlInfo
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a> on Mon Mar 16 2020 19:21:17 GMT+0000 (Coordinated Universal Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>
