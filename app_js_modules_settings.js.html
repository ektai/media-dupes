<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>app/js/modules/settings.js - media-dupes jsdoc documentation</title>
    
    <meta name="description" content="a simple JSDoc based documentation for media-dupes" />
    
        <meta name="keywords" content="media-dupes" />
        <meta name="keyword" content="media-dupes" />
    
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav class="wrap">
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/yafp/media-dupes" target="_blank" class="menu-item" id="website_link" >Github</a></h2><h3>Modules</h3><ul><li><a href="module-crashReporter.html">crashReporter</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-crashReporter.html#~initCrashReporter">initCrashReporter</a></li></ul></li><li><a href="module-ffmpeg.html">ffmpeg</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-ffmpeg.html#~ffmpegGetBinaryPath">ffmpegGetBinaryPath</a></li></ul></li><li><a href="module-githubUrls.html">githubUrls</a></li><li><a href="module-sentry.html">sentry</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-sentry.html#~countEvent">countEvent</a></li><li data-type='method' style='display: none;'><a href="module-sentry.html#~disableSentry">disableSentry</a></li><li data-type='method' style='display: none;'><a href="module-sentry.html#~enableSentry">enableSentry</a></li></ul></li><li><a href="module-settings.html">settings</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-settings.html#~settingsAudioFormatSave">settingsAudioFormatSave</a></li><li data-type='method' style='display: none;'><a href="module-settings.html#~settingsOpenDevTools">settingsOpenDevTools</a></li><li data-type='method' style='display: none;'><a href="module-settings.html#~settingsOpenExternal">settingsOpenExternal</a></li><li data-type='method' style='display: none;'><a href="module-settings.html#~settingsSaveAdditionalParameter">settingsSaveAdditionalParameter</a></li><li data-type='method' style='display: none;'><a href="module-settings.html#~settingsSelectDownloadDir">settingsSelectDownloadDir</a></li><li data-type='method' style='display: none;'><a href="module-settings.html#~settingsToggleAdditionalParameter">settingsToggleAdditionalParameter</a></li><li data-type='method' style='display: none;'><a href="module-settings.html#~settingsToggleErrorReporting">settingsToggleErrorReporting</a></li><li data-type='method' style='display: none;'><a href="module-settings.html#~settingsTogglePrereleases">settingsTogglePrereleases</a></li><li data-type='method' style='display: none;'><a href="module-settings.html#~settingsToggleUrlInformations">settingsToggleUrlInformations</a></li><li data-type='method' style='display: none;'><a href="module-settings.html#~settingsToggleVerboseMode">settingsToggleVerboseMode</a></li></ul></li><li><a href="module-ui.html">ui</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-ui.html#~inputUrlFieldSetState">inputUrlFieldSetState</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainAddUrl">windowMainAddUrl</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainApplicationStateSet">windowMainApplicationStateSet</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainBlurSet">windowMainBlurSet</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainButtonsOthersDisable">windowMainButtonsOthersDisable</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainButtonsOthersEnable">windowMainButtonsOthersEnable</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainButtonsStartDisable">windowMainButtonsStartDisable</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainButtonsStartEnable">windowMainButtonsStartEnable</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainDisableAddUrlButton">windowMainDisableAddUrlButton</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainDistract">windowMainDistract</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainDownloadContent">windowMainDownloadContent</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainDownloadQueueFinished">windowMainDownloadQueueFinished</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainDownloadVideo">windowMainDownloadVideo</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainEnableAddUrlButton">windowMainEnableAddUrlButton</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainIntroShow">windowMainIntroShow</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainLoadingAnimationHide">windowMainLoadingAnimationHide</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainLoadingAnimationShow">windowMainLoadingAnimationShow</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainLogAppend">windowMainLogAppend</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainLogReset">windowMainLogReset</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainLogScrollToEnd">windowMainLogScrollToEnd</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainOpenDownloadFolder">windowMainOpenDownloadFolder</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainResetAskUser">windowMainResetAskUser</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainSettingsUiLoad">windowMainSettingsUiLoad</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainShowSupportedExtractors">windowMainShowSupportedExtractors</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainThumbnailPreviewReset">windowMainThumbnailPreviewReset</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainToDoListReset">windowMainToDoListReset</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainToDoListRestore">windowMainToDoListRestore</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainToDoListSave">windowMainToDoListSave</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainToDoListUpdate">windowMainToDoListUpdate</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainUiMakeUrgent">windowMainUiMakeUrgent</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~windowMainUiReset">windowMainUiReset</a></li><li data-type='method' style='display: none;'><a href="module-ui.html#~youtubeSuggest">youtubeSuggest</a></li></ul></li><li><a href="module-unhandled.html">unhandled</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-unhandled.html#~initUnhandled">initUnhandled</a></li></ul></li><li><a href="module-utils.html">utils</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils.html#~canWriteFileOrFolder">canWriteFileOrFolder</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~defaultDownloadFolderGet">defaultDownloadFolderGet</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~disclaimerCheck">disclaimerCheck</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~disclaimerShow">disclaimerShow</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~downloadStatusCheck">downloadStatusCheck</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~formatBytes">formatBytes</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~fullyDecodeURI">fullyDecodeURI</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~generateTimestamp">generateTimestamp</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~globalObjectGet">globalObjectGet</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~globalObjectSet">globalObjectSet</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~isDirectoryAvailable">isDirectoryAvailable</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~isDirectoryWriteable">isDirectoryWriteable</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~isEncoded">isEncoded</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~openURL">openURL</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~pathExists">pathExists</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~showNotification">showNotification</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~showNoty">showNoty</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~urlIsReachable">urlIsReachable</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~userSettingRead">userSettingRead</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~userSettingWrite">userSettingWrite</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~validURL">validURL</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~writeConsoleMsg">writeConsoleMsg</a></li></ul></li><li><a href="module-youtubeDl.html">youtubeDl</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-youtubeDl.html#~binaryDetailsPathGet">binaryDetailsPathGet</a></li><li data-type='method' style='display: none;'><a href="module-youtubeDl.html#~binaryDetailsValueGet">binaryDetailsValueGet</a></li><li data-type='method' style='display: none;'><a href="module-youtubeDl.html#~binaryPathGet">binaryPathGet</a></li><li data-type='method' style='display: none;'><a href="module-youtubeDl.html#~binaryPathReset">binaryPathReset</a></li><li data-type='method' style='display: none;'><a href="module-youtubeDl.html#~binaryUpdateCheck">binaryUpdateCheck</a></li><li data-type='method' style='display: none;'><a href="module-youtubeDl.html#~binaryUpdateExecute">binaryUpdateExecute</a></li><li data-type='method' style='display: none;'><a href="module-youtubeDl.html#~binaryUpdateSearch">binaryUpdateSearch</a></li><li data-type='method' style='display: none;'><a href="module-youtubeDl.html#~getUrlInfo">getUrlInfo</a></li></ul></li></ul><h3>Events</h3><ul><li><a href="renderer.html#.event:keyCode-Thekeypressevent">keyCode - The key press event</a></li></ul><h3>Namespaces</h3><ul><li><a href="main.html">main</a><ul class='methods'><li data-type='method' style='display: none;'><a href="main.html#.createMenuMain">createMenuMain</a></li><li data-type='method' style='display: none;'><a href="main.html#.createWindowDistraction">createWindowDistraction</a></li><li data-type='method' style='display: none;'><a href="main.html#.createWindowMain">createWindowMain</a></li><li data-type='method' style='display: none;'><a href="main.html#.createWindowSettings">createWindowSettings</a></li><li data-type='method' style='display: none;'><a href="main.html#.doLog">doLog</a></li><li data-type='method' style='display: none;'><a href="main.html#.forceSingleAppInstance">forceSingleAppInstance</a></li><li data-type='method' style='display: none;'><a href="main.html#.powerMonitorInit">powerMonitorInit</a></li><li data-type='method' style='display: none;'><a href="main.html#.powerMonitorNotify">powerMonitorNotify</a></li></ul></li><li><a href="renderer.html">renderer</a><ul class='members'><li data-type='member' style='display: none;'><a href="renderer.html#.blurMainUI">blurMainUI</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.countAppStarts">countAppStarts</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.initSettings">initSettings</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.openSettings">openSettings</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.openYoutubeSuggestDialog">openYoutubeSuggestDialog</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.powerMonitorNotification">powerMonitorNotification</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.scheduleUpdateCheckMediaDupes">scheduleUpdateCheckMediaDupes</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.scheduleUpdateCheckYoutubeDl">scheduleUpdateCheckYoutubeDl</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.startCheckingDependencies">startCheckingDependencies</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.startDisclaimerCheck">startDisclaimerCheck</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.startSearchUpdatesSilent">startSearchUpdatesSilent</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.startSearchUpdatesVerbose">startSearchUpdatesVerbose</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.todoListCheck">todoListCheck</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.todoListTryToSave">todoListTryToSave</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.unblurMainUI">unblurMainUI</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.youtubeDlBinaryPathReset">youtubeDlBinaryPathReset</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.youtubeDlBinaryUpdate">youtubeDlBinaryUpdate</a></li><li data-type='member' style='display: none;'><a href="renderer.html#.youtubeDlSearchUpdatesSilent">youtubeDlSearchUpdatesSilent</a></li></ul><ul class='methods'><li data-type='method' style='display: none;'><a href="renderer.html#.checkApplicationDependencies">checkApplicationDependencies</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.openReleasesOverview">openReleasesOverview</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.searchUpdate">searchUpdate</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.settingsFolderOpen">settingsFolderOpen</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.settingsGetYoutubeDLBinaryVersion">settingsGetYoutubeDLBinaryVersion</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.settingsLoadAllOnAppStart">settingsLoadAllOnAppStart</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.settingsLoadAllOnSettingsUiLoad">settingsLoadAllOnSettingsUiLoad</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.settingsShowFfmpegInfo">settingsShowFfmpegInfo</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.settingsShowYoutubeDLInfo">settingsShowYoutubeDLInfo</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.titlebarInit">titlebarInit</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.urlInputFieldOnFocus">urlInputFieldOnFocus</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.urlInputFieldOnKeyUp">urlInputFieldOnKeyUp</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.validateUrlBeforeAdd">validateUrlBeforeAdd</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowMainClickButtonAddUrl">windowMainClickButtonAddUrl</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowMainClickButtonAudio">windowMainClickButtonAudio</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowMainClickButtonDownloads">windowMainClickButtonDownloads</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowMainClickButtonExtrators">windowMainClickButtonExtrators</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowMainClickButtonIntro">windowMainClickButtonIntro</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowMainClickButtonLogReset">windowMainClickButtonLogReset</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowMainClickButtonSettings">windowMainClickButtonSettings</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowMainClickButtonUIReset">windowMainClickButtonUIReset</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowMainClickButtonVideo">windowMainClickButtonVideo</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowMainClickButtonVideo">windowMainClickButtonVideo</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowMainClickDistract">windowMainClickDistract</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowSettingsClickButtonAdditionalParameterSave">windowSettingsClickButtonAdditionalParameterSave</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowSettingsClickButtonChooseDownloadDir">windowSettingsClickButtonChooseDownloadDir</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowSettingsClickCheckboxAdditionalParameter">windowSettingsClickCheckboxAdditionalParameter</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowSettingsClickCheckboxErrorReporting">windowSettingsClickCheckboxErrorReporting</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowSettingsClickCheckboxErrorReportingMoreInfo">windowSettingsClickCheckboxErrorReportingMoreInfo</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowSettingsClickCheckboxUpdatePolicy">windowSettingsClickCheckboxUpdatePolicy</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowSettingsClickCheckboxVerboseMode">windowSettingsClickCheckboxVerboseMode</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowSettingsClickDropdownAudioFormats">windowSettingsClickDropdownAudioFormats</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowSettingsClickIconBug">windowSettingsClickIconBug</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowSettingsClickIconUserSettingsDir">windowSettingsClickIconUserSettingsDir</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowSettingsClickOpenUrl">windowSettingsClickOpenUrl</a></li><li data-type='method' style='display: none;'><a href="renderer.html#.windowSettingsClickYoutubeDlUpdate">windowSettingsClickYoutubeDlUpdate</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">app/js/modules/settings.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @file Contains all settings functions
 * @author yafp
 * @module settings
 */
'use strict'

// ----------------------------------------------------------------------------
// REQUIRE MODULES
// ----------------------------------------------------------------------------
//
const utils = require('./utils.js')
const sentry = require('./sentry.js')
const youtubeDl = require('./youtubeDl.js')

/**
* @function settingsFolderOpen
* @summary Gets triggered from button on settings.html. Triggers code in main.js which opens the directory which contains possible user-settings-files
* @description Gets triggered from button on settings.html. Triggers code in main.js which opens the directory which contains possible user-settings-files
* @memberof renderer
*/
function settingsFolderOpen () {
    utils.writeConsoleMsg('info', 'settingsFolderOpen ::: User wants to open the folder with user config files.')
    const { ipcRenderer } = require('electron')
    ipcRenderer.send('settingsFolderOpen')
}

/**
* @function settingsOpenDevTools
* @summary Tells the main process to open devTools for settings UI
* @description Tells the main process to open devTools for settings UI
*/
function settingsOpenDevTools () {
    const { ipcRenderer } = require('electron')
    ipcRenderer.send('settingsToggleDevTools')
}

/**
* @function settingsSelectDownloadDir
* @summary Let the user choose a custom download target directory
* @description Is triggered via button on settings.html.
*/
function settingsSelectDownloadDir () {
    const options = { properties: ['openDirectory'] }
    const { dialog } = require('electron').remote

    utils.writeConsoleMsg('info', 'settingsSelectDownloadDir ::: User wants to set a custom download directory. Now opening dialog to select a new download target')
    dialog.showOpenDialog(options).then(res => {
        utils.writeConsoleMsg('warn', '_' + res.filePaths + '_')

        if (res.filePaths.length === 0) {
            utils.writeConsoleMsg('warn', 'settingsSelectDownloadDir ::: User aborted selecting a custom download directory path in settings')
            utils.showNoty('info', 'No changes applied.')
        } else {
            var newDownloadDirectory = res.filePaths.toString()
            utils.userSettingWrite('downloadDir', newDownloadDirectory) // save the value to user-config
            $('#inputCustomTargetDir').val(newDownloadDirectory) // show it in the UI
            utils.writeConsoleMsg('info', 'settingsSelectDownloadDir ::: User selected the following directory: _' + newDownloadDirectory + '_ as download target.')

            // FIXME - is this needed?
            // utils.globalObjectSet('downloadDir', newDownloadDirectory)
        }
    })
}

/**
* @function settingsToggleVerboseMode
* @summary Enables or disabled the verbose mode
* @description Enables or disabled the verbode mode
*/
function settingsToggleVerboseMode () {
    if ($('#checkboxEnableVerbose').is(':checked')) {
        utils.writeConsoleMsg('info', 'settingsToggleVerboseMode ::: Verbose Mode is now enabled')
        utils.userSettingWrite('enableVerboseMode', true)
    } else {
        utils.writeConsoleMsg('info', 'settingsToggleVerboseMode ::: Verbose Mode is now disabled')
        utils.userSettingWrite('enableVerboseMode', false)
    }
}

/**
* @function settingsToggleAdditionalParameter
* @summary Enables or disabled the verbose mode
* @description It is disabled by default. Enables or disabled the verbode mode
*/
function settingsToggleAdditionalParameter () {
    if ($('#checkboxEnableAdditionalParameter').is(':checked')) {
        utils.writeConsoleMsg('info', 'settingsToggleAdditionalParameter ::: Additional parameter is now enabled')
        utils.userSettingWrite('enableAdditionalParameter', true)
    } else {
        utils.writeConsoleMsg('info', 'settingsToggleAdditionalParameter ::: Additional parameter is now disabled')
        utils.userSettingWrite('enableAdditionalParameter', false)
    }
}

/**
* @function settingsSaveAdditionalParameter
* @summary Saves the content of the input field for additional parameters
* @description Saves the content of the input field for additional parameters
*/
function settingsSaveAdditionalParameter () {
    const youtubeDlUnsupportedParameter = youtubeDl.blacklistedParameter // get the blacklisted parameters

    var inputContainsErrors = false // used to remember if an error occured

    var newAdditionalUserParameters = $('#textInputAdditionalParameter').val() // get value from UI
    var splittedParameters = newAdditionalUserParameters.split(' ') // split the input string into single elements
    if (splittedParameters.length > 0) { // If there are elements
        for (var j = 0; j &lt; splittedParameters.length; j++) { // check for each element
            if ($.inArray(splittedParameters[j], youtubeDlUnsupportedParameter) > -1) { // if it is blacklistet
                utils.writeConsoleMsg('warn', 'settingsSaveAdditionalParameter ::: The additional parameter: _' + splittedParameters[j] + '_ is blacklisted.')
                utils.showNoty('error', 'The additional parameter &lt;b>' + splittedParameters[j] + '&lt;/b> is blacklisted. Please remove it and try it again.', 0)
                inputContainsErrors = true
            } else { // or not
                utils.writeConsoleMsg('info', 'settingsSaveAdditionalParameter ::: The additional parameter: _' + splittedParameters[j] + '_ is not blacklisted.')
            }
        }
    }

    if (inputContainsErrors === false) {
        utils.writeConsoleMsg('info', 'settingsSaveAdditionalParameter ::: Saving additional parameters - new value is: _' + newAdditionalUserParameters + '_.')
        utils.userSettingWrite('additionalYoutubeDlParameter', newAdditionalUserParameters)
    }
}

/**
* @function settingsTogglePrereleases
* @summary Enables or disables the support for pre-releases
* @description  Enables or disables the setting to include pre-releases into the update -search
*/
function settingsTogglePrereleases () {
    if ($('#checkboxEnablePreReleases').is(':checked')) {
        utils.writeConsoleMsg('info', 'settingsTogglePrereleases ::: Update-Search will now include pre-releases')
        utils.userSettingWrite('enablePrereleases', true)
    } else {
        utils.writeConsoleMsg('info', 'settingsTogglePrereleases ::: Update-Search will ignore pre-releases')
        utils.userSettingWrite('enablePrereleases', false)
    }
}

/**
* @function settingsToggleUrlInformations
* @summary Enables or disables the fetch-url-informations function
* @description Enables or disables the setting to fetch-url-informations using .getInfo on each added url
*/
function settingsToggleUrlInformations () {
    if ($('#checkboxEnableUrlInformations').is(':checked')) {
        utils.writeConsoleMsg('info', 'settingsToggleUrlInformations ::: Url Informations are now enabled')
        utils.userSettingWrite('enableUrlInformations', true)
    } else {
        utils.writeConsoleMsg('info', 'settingsToggleUrlInformations ::: Url Informations are now disabled')
        utils.userSettingWrite('enableUrlInformations', false)
    }
}

/**
* @function settingsToggleErrorReporting
* @summary Enables or disabled the error reporting function
* @description Enables or disabled the error reporting function
*/
function settingsToggleErrorReporting () {
    if ($('#checkboxEnableErrorReporting').is(':checked')) {
        utils.writeConsoleMsg('info', 'settingsToggleErrorReporting ::: Error reporting is now enabled')
        utils.userSettingWrite('enableErrorReporting', true)
        sentry.enableSentry()
    } else {
        // ask if user really wants to disable error-reporting (using a confirm dialog)
        const Noty = require('noty')
        var n = new Noty(
            {
                theme: 'bootstrap-v4',
                layout: 'bottom',
                type: 'info',
                closeWith: [''], // to prevent closing the confirm-dialog by clicking something other then a confirm-dialog-button
                text: '&lt;b>Do you really want to disable reporting?&lt;/b>&lt;br>&lt;br>* We don\'t track users&lt;br>* We don\'t store any IP informations&lt;br>* We only collect error reports and event counts&lt;br>&lt;br>This helps improving media-dupes',
                buttons: [
                    Noty.button('Yes', 'btn btn-danger mediaDupes_btnDownloadActionWidth', function () {
                        n.close()
                        utils.writeConsoleMsg('info', 'settingsToggleErrorReporting ::: Error reporting is now disabled')
                        utils.userSettingWrite('enableErrorReporting', false)
                        sentry.disableSentry()
                        sentry.countEvent('usageSettingsErrorReportingDisabled')
                        // myUndefinedFunctionFromRendererAfterDisable()
                    },
                    {
                        id: 'button1', 'data-status': 'ok'
                    }),

                    Noty.button('No', 'btn btn-success mediaDupes_btnDownloadActionWidth float-right', function () {
                        n.close()
                        $('#checkboxEnableErrorReporting').prop('checked', true) // revert state of checkbox
                        utils.showNoty('success', '&lt;b>Thanks&lt;/b> for supporting media-dupes development with your error reports.')
                        utils.writeConsoleMsg('info', 'settingsToggleErrorReporting ::: User cancelled disabling of error-reporting')
                    })
                ]
            })

        n.show() // show the noty dialog
    }
}

/**
* @function settingsAudioFormatSave
* @summary Fetches the value from the audio-format select in the settings UI and triggers the update of the related user-settings-file
* @description Fetches the value from the audio-format select in the settings UI and triggers the update of the related user-settings-file
*/
function settingsAudioFormatSave () {
    var userSelectedAudioFormat = $('#inputGroupSelectAudio').val() // get value from UI select inputGroupSelectAudio
    utils.writeConsoleMsg('info', 'settingsAudioFormatSave ::: User selected the audio format: _' + userSelectedAudioFormat + '_.')
    utils.userSettingWrite('audioFormat', userSelectedAudioFormat) // store this value in a json file
}

/**
* @function settingsOpenExternal
* @summary Gets an url from the settings ui and forwards this to the openURL function
* @description Gets an url from the settings ui and forwards this to the openURL function
* @param {string} url - the actual url
*/
function settingsOpenExternal (url) {
    utils.openURL(url)
}

function settingsEnableOrDisableYoutubeDLUpdateButton () {
    // check if youtube details file is writeable
    // if not - disable thje update button
    var youtubeDlBinaryDetailsPath = youtubeDl.binaryDetailsPathGet()
    utils.canWriteFileOrFolder(youtubeDlBinaryDetailsPath, function (error, isWritable) {
        if (error) {
            utils.writeConsoleMsg('error', 'settingsEnableOrDisableYoutubeDLUpdateButton ::: Error while trying to read the youtube-dl details file. Error: ' + error)
            throw error
        }

        if (isWritable === true) {
            // technically we could execute an update if there is one - so lets search for updates
            utils.writeConsoleMsg('info', 'settingsEnableOrDisableYoutubeDLUpdateButton ::: Updating youtube-dl binary is technically possible. Button can stay enabled')
        } else {
            // details file cant be resetted due to permission issues
            utils.writeConsoleMsg('warn', 'settingsEnableOrDisableYoutubeDLUpdateButton ::: Updating youtube-dl binary is not possible on this setup due to permission issues.')
            $('#buttonSettingsYoutubeDLStartUpdate').prop('disabled', true) // disable the button
        }
    })
}

// ----------------------------------------------------------------------------
// EXPORT THE MODULE FUNCTIONS
// ----------------------------------------------------------------------------
//
module.exports.settingsFolderOpen = settingsFolderOpen
module.exports.settingsOpenDevTools = settingsOpenDevTools
module.exports.settingsSelectDownloadDir = settingsSelectDownloadDir
module.exports.settingsToggleVerboseMode = settingsToggleVerboseMode
module.exports.settingsToggleAdditionalParameter = settingsToggleAdditionalParameter
module.exports.settingsSaveAdditionalParameter = settingsSaveAdditionalParameter
module.exports.settingsTogglePrereleases = settingsTogglePrereleases
module.exports.settingsToggleUrlInformations = settingsToggleUrlInformations
module.exports.settingsToggleErrorReporting = settingsToggleErrorReporting
module.exports.settingsAudioFormatSave = settingsAudioFormatSave
module.exports.settingsOpenExternal = settingsOpenExternal
module.exports.settingsEnableOrDisableYoutubeDLUpdateButton = settingsEnableOrDisableYoutubeDLUpdateButton
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a> on Mon Apr 06 2020 19:58:51 GMT+0000 (Coordinated Universal Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>
